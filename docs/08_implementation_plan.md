# 実装計画とGitHub Issue一覧

## フェーズ構成

### Phase 0: Walking Skeleton (垂直スライス実装)
目的: エンドツーエンドの基本動線を最速で実装し、技術検証とチーム開発体制を確立
含むIssue: #1〜#8

### Phase 1: 応募者マイページMVP
目的: 応募者が自身の情報を登録・閲覧できる最小機能を提供
含むIssue: #9〜#16

### Phase 2: エージェント管理画面MVP
目的: エージェントが応募者情報を閲覧・管理できる基本機能を提供
含むIssue: #17〜#24

### Phase 3: ファイル管理機能
目的: 履歴書・求人資料のアップロード/ダウンロード機能を実装
含むIssue: #25〜#30

### Phase 4: 検索・マッチング機能
目的: 全文検索と求人応募マッチング機能を実装
含むIssue: #31〜#36

### Phase 5: 通知・ステータス管理
目的: リアルタイム性を向上させる通知機能とワークフロー管理を実装
含むIssue: #37〜#42

### Phase 6: セキュリティ強化・本番化準備
目的: セキュリティ対策強化とオンプレミス環境への移行準備
含むIssue: #43〜#48

---

## 依存関係マップ

```
Phase 0 (Walking Skeleton)
#1(環境) → #2(DB) → #3(認証API) → #4(ログイン画面)
         → #5(React初期化) → #6(API接続) → #7(デプロイ) → #8(E2Eテスト)

Phase 1 (応募者MVP)
#3 → #9(応募者情報API) → #10(プロフィール画面)
#10 → #11(情報編集機能) → #12(バリデーション)
#9 → #13(パスワード変更) → #14(セキュリティ設定)
     #15(レスポンシブ対応) → #16(応募者E2Eテスト)

Phase 2 (エージェントMVP)
#3 → #17(エージェント権限) → #18(応募者一覧API) → #19(一覧画面)
#18 → #20(応募者詳細画面) → #21(編集機能)
#20 → #22(フィルタ・ソート) → #23(ページネーション)
      #24(エージェントE2Eテスト)

Phase 3 (ファイル管理)
#2 → #25(files テーブル) → #26(ファイルアップロードAPI)
#26 → #27(アップロード画面) → #28(ダウンロード機能)
#28 → #29(ウイルススキャン) → #30(ファイル管理E2Eテスト)

Phase 4 (検索・マッチング)
#2 → #31(job_applicants テーブル) → #32(求人API)
#18 → #33(全文検索API) → #34(検索画面UI)
#32 → #35(求人応募機能) → #36(マッチングE2Eテスト)

Phase 5 (通知・ステータス)
#2 → #37(notifications テーブル) → #38(通知API)
#38 → #39(通知UI) → #40(リアルタイム通知)
#21 → #41(ステータス変更機能) → #42(ワークフローE2Eテスト)

Phase 6 (本番化)
#8 → #43(セキュリティ監査) → #44(パフォーマンステスト)
#44 → #45(オンプレミス環境構築) → #46(データ移行スクリプト)
#46 → #47(本番デプロイ手順) → #48(運用監視設定)
```

---

## Issueアウトライン表

### Phase 0: Walking Skeleton

#### Issue #1: 開発環境セットアップとFirebase初期化
**概要**: フロントエンド・バックエンドの開発環境を構築し、Firebaseとの接続を確認する
**依存**: -
**ラベル**: infra, setup
**受け入れ基準（AC）**:
- [ ] Node.js 20.x、npm がインストール済み
- [ ] `frontend/` に React + TypeScript + Vite プロジェクトが作成済み
- [ ] `backend/` に Node.js + Express プロジェクトが作成済み
- [ ] `.env.development` ファイルに Firebase 設定が正しく入力済み
- [ ] Firebase Authentication、Firestore、Storage への接続テストが成功
- [ ] `npm run dev` でフロントエンド・バックエンドが起動できる
- [ ] README.md にセットアップ手順が記載済み

---

#### Issue #2: Firestore データベーススキーマ初期設定
**概要**: Firestoreに users, applicants コレクションを作成し、初期データ投入スクリプトを用意する
**依存**: #1
**ラベル**: backend, database
**受け入れ基準（AC）**:
- [ ] Firestore に `users` コレクション作成（フィールド: email, role, created_at）
- [ ] Firestore に `applicants` コレクション作成（フィールド: user_id, name, phone, status 等）
- [ ] シードデータ投入スクリプト（seed.js）が作成済み
- [ ] テストユーザー（応募者1名、エージェント1名）が登録済み
- [ ] Firestore Security Rules の初期設定が完了（認証済みユーザーのみ読み書き可能）
- [ ] ドキュメントにスキーマ定義を記載済み

---

#### Issue #3: 認証API実装（ログイン・ログアウト）
**概要**: Firebase Authentication を使った認証APIエンドポイントを実装する
**依存**: #1, #2
**ラベル**: backend, auth
**受け入れ基準（AC）**:
- [ ] `POST /api/v1/auth/login` エンドポイント実装（メール・パスワード認証）
- [ ] `POST /api/v1/auth/logout` エンドポイント実装
- [ ] `GET /api/v1/auth/me` エンドポイント実装（現在のユーザー情報取得）
- [ ] Firebase Admin SDK を使ったセッション検証ミドルウェア実装
- [ ] エラーハンドリング（401, 400）が適切に実装されている
- [ ] Postman または curl でAPIテストが成功
- [ ] API仕様書（04_api.md）に記載内容と整合性がある

---

#### Issue #4: ログイン画面UI実装
**概要**: React でログイン画面を実装し、認証APIと接続する
**依存**: #3, #1
**ラベル**: frontend, auth
**受け入れ基準（AC）**:
- [ ] ログイン画面（メール・パスワード入力フォーム）が表示される
- [ ] バリデーション（必須チェック、メール形式）が動作する
- [ ] ログイン成功時にダッシュボードへリダイレクト
- [ ] ログイン失敗時にエラーメッセージを表示
- [ ] Bootstrap を使ったレスポンシブデザイン実装
- [ ] ローディング状態の表示（ボタン無効化）
- [ ] React Router でルーティング設定済み（/login）

---

#### Issue #5: React初期化とルーティング設定
**概要**: React Router、状態管理、共通レイアウトを設定する
**依存**: #1
**ラベル**: frontend, setup
**受け入れ基準（AC）**:
- [ ] React Router v6 がインストール・設定済み
- [ ] Context API または Redux Toolkit で認証状態管理が実装済み
- [ ] 共通レイアウトコンポーネント（Header, Sidebar, Footer）作成
- [ ] プライベートルート（認証必須）の実装
- [ ] 公開ルート（/login）と認証後ルート（/dashboard）の分離
- [ ] Bootstrap テンプレートの導入
- [ ] Axios インスタンスの設定（ベースURL、インターセプター）

---

#### Issue #6: フロントエンド・バックエンドAPI接続確認
**概要**: フロントエンドからバックエンドAPIへの接続を確認し、CORSを設定する
**依存**: #3, #5
**ラベル**: frontend, backend, integration
**受け入れ基準（AC）**:
- [ ] バックエンドで CORS 設定が完了（開発環境: localhost:5173 許可）
- [ ] Axios で GET /api/v1/auth/me が成功
- [ ] ログイン後に認証トークンがCookieに保存される
- [ ] API エラー時にフロントエンドでエラーメッセージ表示
- [ ] 開発環境で proxy 設定または環境変数でベースURL管理
- [ ] ブラウザ開発者ツールでネットワーク通信を確認済み

---

#### Issue #7: Firebase Hosting へのデプロイ（開発環境）
**概要**: Firebase Hosting にフロントエンドをデプロイし、動作確認する
**依存**: #4, #6
**ラベル**: infra, deployment
**受け入れ基準（AC）**:
- [ ] Firebase CLI がインストール済み（`firebase init hosting`）
- [ ] ビルドコマンド（`npm run build`）が成功
- [ ] Firebase Hosting にデプロイ済み（`firebase deploy --only hosting`）
- [ ] デプロイされたURLでログイン画面が表示される
- [ ] 本番ビルドで環境変数が正しく読み込まれる
- [ ] デプロイ手順がドキュメント化されている

---

#### Issue #8: E2Eテスト環境構築（Walking Skeleton検証）
**概要**: Playwright を使ったE2Eテストで Walking Skeleton を検証する
**依存**: #7
**ラベル**: test, e2e
**受け入れ基準（AC）**:
- [ ] Playwright がインストール・設定済み
- [ ] ログインテストシナリオが作成済み（メール入力→ログイン→ダッシュボード表示）
- [ ] テストが CI/CD パイプラインで実行可能
- [ ] テスト実行結果がレポートとして出力される
- [ ] スクリーンショット・動画キャプチャが保存される
- [ ] テストが全て成功する

---

### Phase 1: 応募者マイページMVP

#### Issue #9: 応募者情報取得・更新API実装
**概要**: 応募者が自身の情報を取得・更新できるAPIエンドポイントを実装する
**依存**: #3
**ラベル**: backend, api
**受け入れ基準（AC）**:
- [ ] `GET /api/v1/applicant/me` エンドポイント実装
- [ ] `PUT /api/v1/applicant/me` エンドポイント実装
- [ ] 認証ミドルウェアで応募者のみアクセス可能に制限
- [ ] バリデーション（氏名・電話番号・生年月日）が実装済み
- [ ] Firestore へのデータ保存・更新が成功
- [ ] API仕様書と整合性がある
- [ ] 単体テスト（Jest）が作成済み

---

#### Issue #10: プロフィール閲覧画面UI実装
**概要**: 応募者マイページでプロフィール情報を表示する画面を実装する
**依存**: #9
**ラベル**: frontend, applicant
**受け入れ基準（AC）**:
- [ ] プロフィール画面（/applicant/profile）が表示される
- [ ] GET /api/v1/applicant/me からデータ取得して表示
- [ ] 氏名、電話番号、住所、生年月日、職歴、スキル等が表示される
- [ ] レスポンシブデザイン（PC・スマホ対応）
- [ ] ローディング状態とエラー状態の表示
- [ ] 編集ボタンから編集画面へ遷移

---

#### Issue #11: プロフィール編集機能UI実装
**概要**: 応募者が自身の情報を編集できるフォーム画面を実装する
**依存**: #10
**ラベル**: frontend, applicant
**受け入れ基準（AC）**:
- [ ] プロフィール編集画面（/applicant/profile/edit）が表示される
- [ ] 各フィールドが編集可能なフォームとして表示
- [ ] 保存ボタンクリックで PUT /api/v1/applicant/me を呼び出し
- [ ] 保存成功時にトーストメッセージ表示
- [ ] 保存失敗時にエラーメッセージ表示
- [ ] キャンセルボタンで閲覧画面に戻る

---

#### Issue #12: 入力バリデーション実装（フロント・バックエンド）
**概要**: フロントエンドとバックエンドの両方でバリデーションを実装する
**依存**: #11, #9
**ラベル**: frontend, backend, validation
**受け入れ基準（AC）**:
- [ ] フロントエンド: React Hook Form でバリデーション実装
- [ ] 必須項目チェック（氏名、電話番号、生年月日）
- [ ] 電話番号形式チェック（10-11桁数字）
- [ ] メールアドレス形式チェック
- [ ] バックエンド: express-validator でバリデーション実装
- [ ] バリデーションエラー時に適切なエラーメッセージ表示
- [ ] バリデーションルールがドキュメント化されている

---

#### Issue #13: パスワード変更機能実装
**概要**: 応募者がパスワードを変更できる機能を実装する
**依存**: #9
**ラベル**: backend, frontend, auth
**受け入れ基準（AC）**:
- [ ] `PUT /api/v1/auth/password` エンドポイント実装
- [ ] 現在のパスワード、新しいパスワード、確認用パスワードを受け取る
- [ ] パスワードポリシー（8文字以上、英数字記号含む）のバリデーション
- [ ] Firebase Authentication でパスワード更新
- [ ] パスワード変更画面UI実装（/applicant/settings/password）
- [ ] 変更成功時にログアウトして再ログイン促す
- [ ] セキュリティログに記録

---

#### Issue #14: セキュリティ設定画面実装
**概要**: 最終ログイン日時、セッション管理などセキュリティ情報を表示する
**依存**: #13
**ラベル**: frontend, applicant, security
**受け入れ基準（AC）**:
- [ ] セキュリティ設定画面（/applicant/settings/security）が表示される
- [ ] 最終ログイン日時が表示される
- [ ] パスワード変更へのリンク
- [ ] アカウント削除ボタン（確認ダイアログ付き）
- [ ] セッション一覧表示（将来的な拡張のためのプレースホルダー）

---

#### Issue #15: レスポンシブデザイン対応（応募者画面）
**概要**: 応募者マイページの全画面をスマホ・タブレット対応にする
**依存**: #10, #11, #14
**ラベル**: frontend, ui, responsive
**受け入れ基準（AC）**:
- [ ] iPhone SE (375px) で全画面が正しく表示される
- [ ] タブレット (768px) で全画面が正しく表示される
- [ ] PC (1024px以上) で全画面が正しく表示される
- [ ] ハンバーガーメニューがスマホで動作する
- [ ] フォーム入力が各デバイスで快適に操作できる
- [ ] 画像・テキストのサイズが適切に調整されている
- [ ] ブラウザ開発者ツールでデバイスエミュレート確認済み

---

#### Issue #16: 応募者機能E2Eテスト
**概要**: 応募者マイページの主要機能をE2Eテストで検証する
**依存**: #15
**ラベル**: test, e2e, applicant
**受け入れ基準（AC）**:
- [ ] ログイン→プロフィール閲覧のテストが成功
- [ ] プロフィール編集→保存のテストが成功
- [ ] パスワード変更のテストが成功
- [ ] バリデーションエラー表示のテストが成功
- [ ] レスポンシブデザインのテスト（スマホ・PC）が成功
- [ ] 全テストが CI/CD パイプラインで実行される

---

### Phase 2: エージェント管理画面MVP

#### Issue #17: エージェント権限管理実装
**概要**: エージェント専用のルートと権限チェックミドルウェアを実装する
**依存**: #3
**ラベル**: backend, auth, agent
**受け入れ基準（AC）**:
- [ ] 認証ミドルウェアで role=agent のチェック実装
- [ ] エージェント専用APIエンドポイントが role=applicant でアクセス不可
- [ ] 403 Forbidden エラーが適切に返される
- [ ] フロントエンドで role に応じたルーティング分岐
- [ ] エージェントダッシュボード（/agent/dashboard）の初期画面作成
- [ ] 権限エラー時のエラーページ表示

---

#### Issue #18: 応募者一覧取得API実装
**概要**: エージェントが応募者一覧を取得できるAPIエンドポイントを実装する
**依存**: #17
**ラベル**: backend, api, agent
**受け入れ基準（AC）**:
- [ ] `GET /api/v1/agent/applicants` エンドポイント実装
- [ ] クエリパラメータ（page, limit, status, sort_by）に対応
- [ ] ページネーション実装（デフォルト20件/ページ）
- [ ] ステータスフィルタリング機能
- [ ] ソート機能（name, created_at, updated_at）
- [ ] レスポンスに pagination 情報含む
- [ ] API仕様書と整合性がある

---

#### Issue #19: 応募者一覧画面UI実装
**概要**: エージェント管理画面で応募者一覧を表示するテーブルを実装する
**依存**: #18
**ラベル**: frontend, agent
**受け入れ基準（AC）**:
- [ ] 応募者一覧画面（/agent/applicants）が表示される
- [ ] テーブル形式で応募者情報（氏名、メール、ステータス、登録日）を表示
- [ ] ページネーションコンポーネントが動作する
- [ ] ステータスフィルタ（ドロップダウン）が動作する
- [ ] ソートボタン（氏名、登録日）が動作する
- [ ] 詳細ボタンクリックで詳細画面へ遷移
- [ ] レスポンシブデザイン（スマホではカード表示）

---

#### Issue #20: 応募者詳細画面UI実装
**概要**: エージェントが応募者の詳細情報を閲覧できる画面を実装する
**依存**: #18
**ラベル**: frontend, agent
**受け入れ基準（AC）**:
- [ ] `GET /api/v1/agent/applicants/:id` エンドポイント実装
- [ ] 応募者詳細画面（/agent/applicants/:id）が表示される
- [ ] 個人情報、職歴、スキル、資格、自己PR等が表示される
- [ ] ステータス変更ドロップダウン（将来機能のためのプレースホルダー）
- [ ] 編集ボタンから編集画面へ遷移
- [ ] 一覧へ戻るボタン

---

#### Issue #21: エージェント用応募者情報編集機能実装
**概要**: エージェントが応募者情報を編集できる機能を実装する
**依存**: #20
**ラベル**: backend, frontend, agent
**受け入れ基準（AC）**:
- [ ] `PUT /api/v1/agent/applicants/:id` エンドポイント実装
- [ ] 応募者編集画面（/agent/applicants/:id/edit）が表示される
- [ ] 全フィールドが編集可能
- [ ] バリデーションが動作する
- [ ] 保存成功時にトーストメッセージ表示
- [ ] 活動履歴に編集ログが記録される
- [ ] 応募者本人には編集通知が送信される（将来機能）

---

#### Issue #22: フィルタ・ソート機能強化
**概要**: 応募者一覧画面のフィルタ・ソート機能を強化する
**依存**: #19
**ラベル**: frontend, backend, agent
**受け入れ基準（AC）**:
- [ ] 複数ステータス同時フィルタ（チェックボックス）
- [ ] 登録日範囲フィルタ（日付ピッカー）
- [ ] フリーワード検索（氏名・メール部分一致）
- [ ] ソート順の昇順・降順切り替え
- [ ] フィルタ・ソート条件がURLクエリパラメータに反映
- [ ] ブラウザバック時にフィルタ状態が保持される
- [ ] フィルタリセットボタン

---

#### Issue #23: ページネーション実装
**概要**: 応募者一覧のページネーションを実装する
**依存**: #19
**ラベル**: frontend, agent
**受け入れ基準（AC）**:
- [ ] ページ番号ボタンが表示される（1, 2, 3, ...）
- [ ] 前へ・次へボタンが動作する
- [ ] 現在ページがハイライト表示される
- [ ] 総ページ数・総件数が表示される
- [ ] ページあたり件数変更（10, 20, 50）が可能
- [ ] URLクエリパラメータ（?page=2）に対応
- [ ] 最終ページで「次へ」ボタンが無効化される

---

#### Issue #24: エージェント機能E2Eテスト
**概要**: エージェント管理画面の主要機能をE2Eテストで検証する
**依存**: #23
**ラベル**: test, e2e, agent
**受け入れ基準（AC）**:
- [ ] エージェントログイン→一覧表示のテストが成功
- [ ] フィルタ・ソート機能のテストが成功
- [ ] ページネーションのテストが成功
- [ ] 応募者詳細表示のテストが成功
- [ ] 応募者編集→保存のテストが成功
- [ ] 権限エラー（応募者がエージェント画面にアクセス）のテストが成功

---

### Phase 3: ファイル管理機能

#### Issue #25: files コレクション設計とセキュリティルール
**概要**: Firestore に files コレクションを作成し、Firebase Storage と連携する
**依存**: #2
**ラベル**: backend, database, storage
**受け入れ基準（AC）**:
- [ ] Firestore に `files` コレクション作成
- [ ] フィールド: user_id, file_name, file_path, file_type, file_size, uploaded_at
- [ ] Firebase Storage バケット作成（applicants/, jobs/）
- [ ] Storage Security Rules 設定（認証済みユーザーのみアップロード可能）
- [ ] ファイルサイズ制限（300MB）設定
- [ ] ファイル形式制限（PDF, Word, Excel）設定

---

#### Issue #26: ファイルアップロードAPI実装
**概要**: ファイルアップロード用のAPIエンドポイントを実装する
**依存**: #25
**ラベル**: backend, api, file
**受け入れ基準（AC）**:
- [ ] `POST /api/v1/files/upload` エンドポイント実装
- [ ] multipart/form-data 形式のファイル受信
- [ ] Firebase Storage へのアップロード
- [ ] Firestore に ファイルメタデータ保存
- [ ] ファイル形式・サイズのバリデーション
- [ ] ウイルススキャン（ClamAV）統合（将来機能のためのプレースホルダー）
- [ ] エラーハンドリング（413, 400）

---

#### Issue #27: ファイルアップロード画面UI実装
**概要**: 応募者が履歴書をアップロードできる画面を実装する
**依存**: #26
**ラベル**: frontend, applicant, file
**受け入れ基準（AC）**:
- [ ] ファイルアップロード画面（/applicant/files）が表示される
- [ ] ドラッグ&ドロップでファイルアップロード可能
- [ ] ファイル選択ボタンでファイルアップロード可能
- [ ] アップロード進捗バーが表示される
- [ ] アップロード成功時にトーストメッセージ表示
- [ ] アップロード済みファイル一覧が表示される
- [ ] ファイル形式・サイズエラー時にエラーメッセージ表示

---

#### Issue #28: ファイルダウンロード機能実装
**概要**: ファイルをダウンロードできる機能を実装する
**依存**: #27
**ラベル**: backend, frontend, file
**受け入れ基準（AC）**:
- [ ] `GET /api/v1/files/:id/download` エンドポイント実装
- [ ] Firebase Storage から署名付きURLを取得
- [ ] 認証・権限チェック（自分のファイルまたはエージェント）
- [ ] Content-Disposition ヘッダー設定
- [ ] ダウンロードボタンクリックでファイルダウンロード
- [ ] ダウンロード失敗時にエラーメッセージ表示

---

#### Issue #29: ウイルススキャン統合（オプション）
**概要**: アップロードされたファイルのウイルススキャンを実装する（将来機能）
**依存**: #26
**ラベル**: backend, security, file
**受け入れ基準（AC）**:
- [ ] ClamAV または VirusTotal API 統合
- [ ] アップロード後に非同期でスキャン実行
- [ ] スキャン結果を Firestore に保存（clean, infected, pending）
- [ ] 感染ファイル検出時にファイル削除
- [ ] 感染ファイル検出時にエージェントに通知
- [ ] スキャン状態がファイル一覧で確認できる

---

#### Issue #30: ファイル管理E2Eテスト
**概要**: ファイルアップロード・ダウンロード機能をE2Eテストで検証する
**依存**: #28
**ラベル**: test, e2e, file
**受け入れ基準（AC）**:
- [ ] ファイルアップロードのテストが成功
- [ ] ファイルダウンロードのテストが成功
- [ ] ファイル削除のテストが成功
- [ ] ファイル形式エラーのテストが成功
- [ ] ファイルサイズエラーのテストが成功
- [ ] 権限エラー（他人のファイルダウンロード）のテストが成功

---

### Phase 4: 検索・マッチング機能

#### Issue #31: job_applicants コレクション設計
**概要**: 求人と応募者の紐付けを管理するコレクションを作成する
**依存**: #2
**ラベル**: backend, database
**受け入れ基準（AC）**:
- [ ] Firestore に `job_applicants` コレクション作成
- [ ] フィールド: job_id, applicant_id, applied_at, status, notes
- [ ] 複合インデックス（job_id + applicant_id）作成
- [ ] Security Rules 設定（エージェントのみ作成可能）
- [ ] ステータス ENUM（applied, screening, interview, offer, accepted, rejected）

---

#### Issue #32: 求人情報管理API実装
**概要**: 求人情報のCRUD APIを実装する
**依存**: #31
**ラベル**: backend, api, agent
**受け入れ基準（AC）**:
- [ ] `POST /api/v1/agent/jobs` エンドポイント実装
- [ ] `GET /api/v1/agent/jobs` エンドポイント実装（一覧）
- [ ] `GET /api/v1/agent/jobs/:id` エンドポイント実装（詳細）
- [ ] `PUT /api/v1/agent/jobs/:id` エンドポイント実装（更新）
- [ ] `DELETE /api/v1/agent/jobs/:id` エンドポイント実装（削除）
- [ ] バリデーション（タイトル、企業名、雇用形態）
- [ ] API仕様書と整合性がある

---

#### Issue #33: 全文検索API実装
**概要**: Firestore または Algolia を使った全文検索APIを実装する
**依存**: #18
**ラベル**: backend, api, search
**受け入れ基準（AC）**:
- [ ] `POST /api/v1/agent/search` エンドポイント実装
- [ ] 検索フィールド: work_history, skills, certifications, self_pr
- [ ] AND/OR/NOT 検索対応
- [ ] 部分一致・前方一致検索
- [ ] 検索結果ハイライト機能
- [ ] ページネーション対応
- [ ] 検索時間が1秒以内（99名のデータ）

---

#### Issue #34: 検索画面UI実装
**概要**: エージェント管理画面に全文検索機能を実装する
**依存**: #33
**ラベル**: frontend, agent, search
**受け入れ基準（AC）**:
- [ ] 検索バーが表示される（/agent/search）
- [ ] 検索キーワード入力→検索実行
- [ ] 検索結果がテーブル表示される
- [ ] マッチ箇所がハイライト表示される
- [ ] 検索結果件数・実行時間が表示される
- [ ] 検索結果から応募者詳細へ遷移可能
- [ ] 検索履歴保存（LocalStorage）

---

#### Issue #35: 求人応募機能実装
**概要**: 求人と応募者を紐付ける機能を実装する
**依存**: #32
**ラベル**: backend, frontend, agent
**受け入れ基準（AC）**:
- [ ] `POST /api/v1/agent/jobs/:job_id/applicants` エンドポイント実装
- [ ] 求人管理画面で応募者を選択して紐付けボタンクリック
- [ ] 複数応募者を一括紐付け可能
- [ ] 重複チェック（既に紐付け済みの場合はエラー）
- [ ] 紐付け成功時にトーストメッセージ表示
- [ ] 応募者マイページで紐付けられた求人一覧が表示される

---

#### Issue #36: マッチング機能E2Eテスト
**概要**: 検索・マッチング機能をE2Eテストで検証する
**依存**: #35
**ラベル**: test, e2e, search
**受け入れ基準（AC）**:
- [ ] 全文検索のテストが成功
- [ ] 検索結果ハイライトのテストが成功
- [ ] 求人作成のテストが成功
- [ ] 求人応募者紐付けのテストが成功
- [ ] 応募者が求人一覧を確認できるテストが成功
- [ ] 検索パフォーマンステスト（1秒以内）が成功

---

### Phase 5: 通知・ステータス管理

#### Issue #37: notifications コレクション設計
**概要**: 通知機能のためのコレクションを作成する
**依存**: #2
**ラベル**: backend, database
**受け入れ基準（AC）**:
- [ ] Firestore に `notifications` コレクション作成
- [ ] フィールド: user_id, type, title, message, is_read, read_at, created_at
- [ ] インデックス（user_id + is_read）作成
- [ ] Security Rules 設定（自分の通知のみ閲覧可能）
- [ ] 通知タイプ ENUM（new_job, status_change, new_message, system）

---

#### Issue #38: 通知API実装
**概要**: 通知の取得・既読更新APIを実装する
**依存**: #37
**ラベル**: backend, api
**受け入れ基準（AC）**:
- [ ] `GET /api/v1/applicant/notifications` エンドポイント実装
- [ ] `PUT /api/v1/applicant/notifications/:id/read` エンドポイント実装
- [ ] 未読通知数取得エンドポイント実装
- [ ] ページネーション対応
- [ ] 未読フィルタリング機能
- [ ] 通知作成ヘルパー関数実装

---

#### Issue #39: 通知UI実装
**概要**: 通知一覧画面とヘッダーの通知バッジを実装する
**依存**: #38
**ラベル**: frontend
**受け入れ基準（AC）**:
- [ ] ヘッダーに通知アイコン・バッジ表示（未読件数）
- [ ] 通知一覧画面（/applicant/notifications）が表示される
- [ ] 未読・既読の区別がある（背景色変更）
- [ ] 通知クリックで既読に更新
- [ ] 通知の種類ごとにアイコン表示
- [ ] 全既読ボタン実装
- [ ] レスポンシブデザイン対応

---

#### Issue #40: リアルタイム通知（Firebase Cloud Messaging）
**概要**: Firebase Cloud Messaging を使ったリアルタイム通知を実装する
**依存**: #39
**ラベル**: backend, frontend, notification
**受け入れ基準（AC）**:
- [ ] Firebase Cloud Messaging SDK 統合
- [ ] ブラウザでプッシュ通知許可リクエスト
- [ ] バックエンドから通知送信機能実装
- [ ] フォアグラウンド通知表示
- [ ] バックグラウンド通知表示
- [ ] 通知クリックで該当画面へ遷移
- [ ] 通知設定画面（オン/オフ切り替え）

---

#### Issue #41: ステータス変更機能実装
**概要**: エージェントが応募者のステータスを変更できる機能を実装する
**依存**: #21
**ラベル**: backend, frontend, agent
**受け入れ基準（AC）**:
- [ ] `PUT /api/v1/agent/applicants/:id/status` エンドポイント実装
- [ ] ステータスドロップダウンから選択して更新
- [ ] ステータス変更時に通知が応募者に送信される
- [ ] 活動履歴にステータス変更ログが記録される
- [ ] ステータス変更履歴が画面に表示される
- [ ] 備考欄（任意）入力可能

---

#### Issue #42: ワークフローE2Eテスト
**概要**: 通知・ステータス管理機能をE2Eテストで検証する
**依存**: #41
**ラベル**: test, e2e
**受け入れ基準（AC）**:
- [ ] ステータス変更→通知送信のテストが成功
- [ ] 通知一覧表示のテストが成功
- [ ] 通知既読更新のテストが成功
- [ ] リアルタイム通知のテストが成功
- [ ] ステータス変更履歴表示のテストが成功
- [ ] 全ワークフローが正常に動作する

---

### Phase 6: セキュリティ強化・本番化準備

#### Issue #43: セキュリティ監査と脆弱性スキャン
**概要**: セキュリティベストプラクティスに従って脆弱性をチェックする
**依存**: #8
**ラベル**: security, audit
**受け入れ基準（AC）**:
- [ ] npm audit で脆弱性ゼロ
- [ ] OWASP ZAP でセキュリティスキャン実施
- [ ] XSS対策確認（React エスケープ、CSP設定）
- [ ] CSRF対策確認（CSRFトークン）
- [ ] SQLインジェクション対策確認（Firestore使用のため該当なし）
- [ ] 認証・認可のペネトレーションテスト実施
- [ ] セキュリティ監査レポート作成

---

#### Issue #44: パフォーマンステスト
**概要**: 性能要件を満たすかパフォーマンステストを実施する
**依存**: #43
**ラベル**: test, performance
**受け入れ基準（AC）**:
- [ ] Lighthouse スコア 90点以上（Performance）
- [ ] 画面表示が2秒以内
- [ ] 全文検索が1秒以内（99名のデータ）
- [ ] ファイルアップロード（100MB）が30秒以内
- [ ] 同時接続数20名でパフォーマンス低下なし
- [ ] Webページサイズが3MB以下
- [ ] パフォーマンステストレポート作成

---

#### Issue #45: オンプレミス環境構築ガイド作成
**概要**: 本番環境（オンプレミス）構築手順をドキュメント化する
**依存**: #44
**ラベル**: infra, documentation
**受け入れ基準（AC）**:
- [ ] サーバースペック要件のドキュメント作成
- [ ] OS（Ubuntu/CentOS）インストール手順
- [ ] PostgreSQL/MySQL インストール・設定手順
- [ ] Node.js/Python インストール・設定手順
- [ ] Nginx/Apache インストール・設定手順
- [ ] SSL証明書設定手順
- [ ] ファイアウォール設定手順
- [ ] バックアップスクリプト作成

---

#### Issue #46: データ移行スクリプト作成
**概要**: Firebase から オンプレミスDB へのデータ移行スクリプトを作成する
**依存**: #45
**ラベル**: backend, migration
**受け入れ基準（AC）**:
- [ ] Firestore エクスポートスクリプト作成
- [ ] PostgreSQL/MySQL インポートスクリプト作成
- [ ] ファイル移行スクリプト（Firebase Storage → ローカルストレージ）
- [ ] データ整合性チェックスクリプト
- [ ] ロールバックスクリプト
- [ ] 移行手順書作成
- [ ] テスト環境で移行テスト成功

---

#### Issue #47: 本番デプロイ手順書作成
**概要**: 本番環境へのデプロイ手順を詳細にドキュメント化する
**依存**: #46
**ラベル**: infra, documentation
**受け入れ基準（AC）**:
- [ ] ビルド手順のドキュメント作成
- [ ] デプロイ手順のドキュメント作成
- [ ] ロールバック手順のドキュメント作成
- [ ] ヘルスチェック手順のドキュメント作成
- [ ] デプロイチェックリスト作成
- [ ] ダウンタイム最小化手順
- [ ] デプロイ自動化スクリプト作成

---

#### Issue #48: 運用監視設定
**概要**: 本番環境の監視・ログ・アラート設定を行う
**依存**: #47
**ラベル**: infra, monitoring
**受け入れ基準（AC）**:
- [ ] サーバーリソース監視（CPU、メモリ、ディスク）設定
- [ ] アプリケーションログ設定（Winston/Pino）
- [ ] エラーログ監視・アラート設定
- [ ] アクセスログ解析設定
- [ ] バックアップ自動化（日次、7日保持）
- [ ] ヘルスチェックエンドポイント実装
- [ ] アラート通知設定（メール/Slack）
- [ ] 運用マニュアル作成

---

## 要確認事項

### 技術選定
- [ ] **バックエンド**: Node.js vs Python どちらを採用するか？（推奨: Node.js）
- [ ] **データベース（本番）**: PostgreSQL vs MySQL どちらを採用するか？（推奨: PostgreSQL）
- [ ] **全文検索**: Elasticsearch vs PostgreSQL FTS どちらを採用するか？（推奨: Firestore検索 → 本番PostgreSQL FTS）
- [ ] **Webサーバー（本番）**: Nginx vs Apache どちらを採用するか？（推奨: Nginx）

### スコープ
- [ ] **ウイルススキャン**: ClamAV統合を本番導入するか？（予算+20万円）
- [ ] **リアルタイム通知**: Firebase Cloud Messaging を使用するか、ポーリングで代替するか？
- [ ] **商談メモ機能**: Phase 1-5 に含めるか、Phase 7以降に延期するか？
- [ ] **活動履歴機能**: どこまで詳細に記録するか？（全操作 vs 重要操作のみ）

### テスト戦略
- [ ] **E2Eテストツール**: Playwright vs Cypress どちらを採用するか？（推奨: Playwright）
- [ ] **ユニットテストカバレッジ**: 目標カバレッジは何%か？（推奨: 80%以上）
- [ ] **パフォーマンステスト**: 負荷テストツールは何を使用するか？（推奨: k6）

### 開発体制
- [ ] **開発メンバー**: フロントエンド何名、バックエンド何名か？
- [ ] **スプリント期間**: 1週間 vs 2週間 どちらか？
- [ ] **レビュープロセス**: プルリクエストレビューは必須か？
- [ ] **CI/CD**: GitHub Actions を使用するか？

### その他
- [ ] **Bootstrap テンプレート**: 有料テンプレート購入するか、無料テンプレートを使用するか？
- [ ] **多言語対応**: 将来的に英語対応が必要か？
- [ ] **モバイルアプリ**: 将来的にネイティブアプリ化の予定はあるか？
